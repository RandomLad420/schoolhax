function getAnswer(){var e;null==worker&&(worker=new Tesseract.TesseractWorker);try{e=$("#word_canvas")[0].toDataURL("image/png")}catch(e){return}worker.recognize(e,"eng",{tessedit_ocr_engine_mode:Tesseract.OEM.TESSERACT_ONLY,tessedit_char_whitelist:"Iabcdefghijklmnopqrstuvwxyz-"}).then(function(e){console.log(e);var t=formatAnswer(e.text);console.log(t);var r=!0;if(""===t&&(r=!1,void 0!==fallbackWord&&(t=fallbackWord,r=!0)),console.log(t),r){var n=translations1[t];void 0===n&&(n=translations2[t]),console.log(n),$(".guess").val(n);var a=jQuery.Event("keypress");a.which=13,$(".guess").trigger(a)}setTimeout(getAnswer,500*(10-speed))})}function formatAnswer(e){var t={ifs:"it's",excned:"excited",equauy:"equally"};for(var r in e=e.toLowerCase().substring(0,e.indexOf("\n")).replace(" ",""),t)t.hasOwnProperty(r)&&(e=e.replace(r,t[r]));return e}function answerQuestion(){var e=$(".gender").text(),t=translations[e];$("input").val(t);var r=jQuery.Event("keydown");r.which=13,$("input").trigger(r),setTimeout(answerQuestion,250)}function formatStorage(e){return e.replace(" ","").toLowerCase().trim()}function formatType(e){return e.replace("masculine","m").replace("feminine","f").replace("singular","(s)").replace("plural","(pl)").trim()}try{if(-1!==window.location.href.indexOf("/game")){alert("\nThank you for using JeffNJellyBean's ThisIsLanguage bot!\nImportant information:\nIf leveling up, it is a bit buggy. You will have to manually press enter and wait a bit longer, but it is still easy to win.\nNot all words will work. If the bot encounters a word it cannot figure out, it won't answer. To set a default fallback word, go to advanced options.\n    ");var fallbackWord=void 0,speed=10;if(!(confirm("\nClick cancel to view advanced options.\n    ")||(fallbackWord=formatAnswer(prompt("Fallback word (this will translate):")),(speed=prompt("Speed (1-10):"))<=10&&speed>=1)))throw new Error("Bad number");(ele=document.createElement("script")).src="https://unpkg.com/tesseract.js@v2.0.0-alpha.13/dist/tesseract.min.js",document.body.appendChild(ele),(ele=document.createElement("script")).src="https://code.jquery.com/jquery-3.4.1.min.js",document.body.appendChild(ele);for(var worker,translations1={},translations2={},tables=document.querySelectorAll("tr"),i=0;i<tables.length;i++){var childs=tables[i].children;translations1[formatStorage(childs[0].innerText)]=childs[1].innerText,translations2[formatStorage(childs[1].innerText)]=childs[0].innerText}confirm("OK to play, cancel to Level Up")?$(".play_btn").click():$(".level_up_btn").click();var interval=setInterval(function(){"1"===$(".delay").text()&&(clearTimeout(interval),setTimeout(getAnswer,1e3))},500)}else if(-1!==window.location.href.indexOf("/grammar")){var ele;(ele=document.createElement("script")).src="https://code.jquery.com/jquery-3.4.1.min.js",document.body.appendChild(ele);var translations={};$("tr").each(function(e){var t=$(this).children(),r=formatType(t.first().text());translations[r]=t.eq(1).text().trim()}),$(".start_testing_btn").click(),answerQuestion()}}catch(e){alert(`\nIt appears there was an error.\nTechnical stuff:\n${e.message}\n  `)}
